<div class="salestable-container">
  <div class="breadcrumb" style="margin-bottom: 12px;">
    <a (click)="goBack()" style="cursor:pointer; color:#53a6ff; ">Sales Summary</a> &gt; <span>Sortable Sales Overview</span>
  </div>
  <div class="card-header">
    <h3>Sortable Sales Overview</h3>
  </div>

  <!-- Search and Filters -->
  <div class="search-filters" style="margin: 20px 0px; display: flex; gap: 24px; align-items: flex-end;">
    <div class="search-box">
      <input
        id="search"
        type="text"
        [(ngModel)]="searchQuery"
        (input)="onSearchChange($event)"
        placeholder="Search by Sales ID, Order ID, Product Name, Category, or Product ID"
      />
    </div>
    <div class="date-filter" style="display: flex; gap: 12px;">
      <div class="date-group">
        <span>From:</span>
        <input
          id="fromDate"
          type="date"
          [(ngModel)]="fromDate"
          (change)="onDateChange()"
          [max]="toDate"
        />
      </div>
      <div class="date-group">
        <span>To:</span>
        <input
          id="toDate"
          type="date"
          [(ngModel)]="toDate"
          (change)="onDateChange()"
          [min]="fromDate"
          [max]="today"
        />
      </div>
    </div>
  </div>

  <div *ngIf="loading" class="loading-spinner" style="text-align:center; margin: 24px 0;">
    <i class="fa fa-spinner fa-spin fa-2x"></i>
    <p>Loading sales data...</p>
  </div>
  <div *ngIf="error" class="error-message" style="color: #F44336; text-align:center; margin: 16px 0;">
    <i class="fa fa-exclamation-triangle"></i> {{ error }}
  </div>

  <div *ngIf="!loading && !error">
    <ag-grid-angular
      style="width: 100%; height: 600px;"
      class="ag-theme-alpine"
      [rowData]="pagedData"
      [columnDefs]="columnDefs"
      [defaultColDef]="defaultColDef"
      [gridOptions]="gridOptions"
      (gridReady)="onGridReady($event)"
    >
    </ag-grid-angular>

    <div class="pagination-controls" *ngIf="filteredData.length > pageSize" style="text-align:center; margin: 12px 0;">
      <button (click)="prevPage()" [disabled]="page === 1">&lt;&lt;</button>
      <span>Page {{ page }} of {{ totalPages }}</span>
      <button (click)="nextPage()" [disabled]="page === totalPages">&gt;&gt;</button>
    </div>
  </div>
</div> 